{% extends "views/platform-admin/_base_template.html" %}
{% from "components/live-search.html" import live_search %}
{% from "components/page-footer.html" import page_footer %}
{% from "components/page-header.html" import page_header %}
{% from "components/buttons.html" import secondary_button_transparent_white %}

{% block per_page_title %}
  {{ _('All organisations') }}
{% endblock %}

{% block platform_admin_content %}

  <div>
    <main role="main">
      <div class="grid-row contain-floats mt-8 block clear-both contain-floats">
        <div class="w-full float-left py-0 px-0 px-gutterHalf box-border">

          {{ live_search(target_selector='.notifications-browse-list-item', show=True, form=search_form, label=_('Search by name')) }}

          <nav>
            <ul>
              {% for org in organisations %}
                <li>
                  <a class="notifications-browse-list-link" href="{{ url_for('main.organisation_dashboard', org_id=org.id) }}">{{ org.name }}</a>
                  <p class="notifications-browse-list-hint">
                    {{ org.count_of_live_services }}
                    {{ _('live service(s)') }}
                  </p>
                  {% if not org.active %}
                    <span class="notifications-table-field-status-default">- {{_('archived') }}</span>
                  {% endif %}
                </li>
              {% endfor %}
            </ul>
          </nav>

        </div>
      </div>
      <div>
        <div>
          <div class="w-full float-left py-0 px-0 px-gutterHalf box-border">
            {{ secondary_button_transparent_white(label=_('New organisation'),href=url_for('main.add_organisation')) }}
          </div>
        </div>
      </div>
    </main>
  </div>

{% endblock %}
